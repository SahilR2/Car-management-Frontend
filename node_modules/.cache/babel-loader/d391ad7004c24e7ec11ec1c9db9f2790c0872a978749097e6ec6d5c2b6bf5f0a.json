{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{createProduct,updateProduct,getProduct}from\"../services/api\";import{useParams,useNavigate}from\"react-router-dom\";// Import useNavigate\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CarForm=_ref=>{let{isEdit}=_ref;const[title,setTitle]=useState(\"\");const[description,setDescription]=useState(\"\");const[tags,setTags]=useState(\"\");const[images,setImages]=useState([]);const{id}=useParams();// For editing a car\nconst navigate=useNavigate();// useNavigate hook\n// Fetch the car details if it's an edit\nuseEffect(()=>{if(isEdit){const fetchCar=async()=>{try{const{data}=await getProduct(id);setTitle(data.title);setDescription(data.description);setTags(data.tags.join(\", \"));setImages(data.images);}catch(error){console.error(\"Error fetching car for edit\",error);}};fetchCar();}},[id,isEdit]);// Handle image file uploads\nconst handleImageChange=e=>{const files=e.target.files;setImages(Array.from(files));};// Handle form submission\nconst handleSubmit=async e=>{e.preventDefault();const formData=new FormData();images.forEach(image=>{formData.append(\"images\",image);});formData.append(\"title\",title);formData.append(\"description\",description);formData.append(\"tags\",tags);try{if(isEdit){await updateProduct(id,formData);navigate(`/product/${id}`);// Use navigate to redirect\n}else{await createProduct(formData);navigate(\"/product-list\");// Redirect to product list after creating a new car\n}}catch(error){console.error(\"Error submitting the form\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEdit?\"Edit Car\":\"Add Car\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:title,onChange:e=>setTitle(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:description,onChange:e=>setDescription(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Tags (comma separated)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:tags,onChange:e=>setTags(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Images (Up to 10)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",multiple:true,onChange:handleImageChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary mt-2\",children:isEdit?\"Update Car\":\"Add Car\"})]})]});};export default CarForm;","map":{"version":3,"names":["React","useState","useEffect","createProduct","updateProduct","getProduct","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","CarForm","_ref","isEdit","title","setTitle","description","setDescription","tags","setTags","images","setImages","id","navigate","fetchCar","data","join","error","console","handleImageChange","e","files","target","Array","from","handleSubmit","preventDefault","formData","FormData","forEach","image","append","className","children","onSubmit","type","value","onChange","required","multiple"],"sources":["D:/MY PROJECTS/car-management/client/src/component/CarForm.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { createProduct, updateProduct, getProduct } from \"../services/api\";\r\nimport { useParams, useNavigate } from \"react-router-dom\"; // Import useNavigate\r\n\r\nconst CarForm = ({ isEdit }) => {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [tags, setTags] = useState(\"\");\r\n  const [images, setImages] = useState([]);\r\n  const { id } = useParams();  // For editing a car\r\n  const navigate = useNavigate(); // useNavigate hook\r\n\r\n  // Fetch the car details if it's an edit\r\n  useEffect(() => {\r\n    if (isEdit) {\r\n      const fetchCar = async () => {\r\n        try {\r\n          const { data } = await getProduct(id);\r\n          setTitle(data.title);\r\n          setDescription(data.description);\r\n          setTags(data.tags.join(\", \"));\r\n          setImages(data.images);\r\n        } catch (error) {\r\n          console.error(\"Error fetching car for edit\", error);\r\n        }\r\n      };\r\n      fetchCar();\r\n    }\r\n  }, [id, isEdit]);\r\n\r\n  // Handle image file uploads\r\n  const handleImageChange = (e) => {\r\n    const files = e.target.files;\r\n    setImages(Array.from(files));\r\n  };\r\n\r\n  // Handle form submission\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    images.forEach((image) => {\r\n      formData.append(\"images\", image);\r\n    });\r\n\r\n    formData.append(\"title\", title);\r\n    formData.append(\"description\", description);\r\n    formData.append(\"tags\", tags);\r\n\r\n    try {\r\n      if (isEdit) {\r\n        await updateProduct(id, formData);\r\n        navigate(`/product/${id}`); // Use navigate to redirect\r\n      } else {\r\n        await createProduct(formData);\r\n        navigate(\"/product-list\"); // Redirect to product list after creating a new car\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error submitting the form\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>{isEdit ? \"Edit Car\" : \"Add Car\"}</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <label>Title</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Description</label>\r\n          <textarea\r\n            className=\"form-control\"\r\n            value={description}\r\n            onChange={(e) => setDescription(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Tags (comma separated)</label>\r\n          <input\r\n            type=\"text\"\r\n            className=\"form-control\"\r\n            value={tags}\r\n            onChange={(e) => setTags(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label>Images (Up to 10)</label>\r\n          <input\r\n            type=\"file\"\r\n            className=\"form-control\"\r\n            multiple\r\n            onChange={handleImageChange}\r\n          />\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary mt-2\">\r\n          {isEdit ? \"Update Car\" : \"Add Car\"}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CarForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}